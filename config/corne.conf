# =========================================================
# ZMK Config for Wireless Corne (nRF52840 / nice!nano v2)
# Works for both halves â€” built separately with SHIELD=corne_left / corne_right
# =========================================================

# --- Core ZMK Features ---
CONFIG_ZMK_SLEEP=y
CONFIG_ZMK_IDLE_TIMEOUT=1200

# --- Display ---
CONFIG_ZMK_DISPLAY=y

# --- BLE Split Communication ---
CONFIG_ZMK_SPLIT=y
CONFIG_ZMK_BLE=y


# --- Bluetooth Behavior ---
CONFIG_BT_MAX_CONN=5
CONFIG_BT_MAX_PAIRED=5
CONFIG_BT_GATT_CLIENT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_OBSERVER=y
CONFIG_BT_CENTRAL=y

# --- BLE Performance / Range Tuning ---
CONFIG_BT_CTLR_TX_PWR_PLUS_4=y
CONFIG_BT_CTLR_LE_ENC=y
CONFIG_BT_BUF_ACL_TX_COUNT=10
CONFIG_BT_BUF_ACL_RX_COUNT=10

# --- Power Saving ---
CONFIG_SYSTEM_WORKQUEUE_STACK_SIZE=2048
CONFIG_MAIN_STACK_SIZE=2048

# =========================================================
# RGB Lighting Configuration
# =========================================================

# Enable RGB support
CONFIG_ZMK_RGB_UNDERGLOW=y
CONFIG_WS2812_STRIP=y

# LED strip settings
CONFIG_ZMK_RGB_UNDERGLOW_BRIGHTNESS=150       # brightness (0-255)
CONFIG_ZMK_RGB_UNDERGLOW_ANIMATION_SPEED=3
CONFIG_ZMK_RGB_UNDERGLOW_EFFECT_NONE=n
CONFIG_ZMK_RGB_UNDERGLOW_EFFECT_SOLID=y
CONFIG_ZMK_RGB_UNDERGLOW_EFFECT_BREATHE=y
CONFIG_ZMK_RGB_UNDERGLOW_EFFECT_REACTIVE=y    # glow when pressed

# Reactive lighting behavior
CONFIG_ZMK_RGB_UNDERGLOW_REACTIVE_FULL_KEYS=y # each key triggers LED under it
CONFIG_ZMK_RGB_UNDERGLOW_REACTIVE_TIMEOUT=200 # ms before LED fades

# Number of LEDs (each key has one)
CONFIG_ZMK_RGB_UNDERGLOW_NUM_PIXELS=42        # Corne has 42 keys total (21/side)

# Optional: sync colors between halves
CONFIG_ZMK_SPLIT_RGB_UNDERGLOW_ENABLE=y

# Default color (white)
CONFIG_ZMK_RGB_UNDERGLOW_HUE=0
CONFIG_ZMK_RGB_UNDERGLOW_SAT=0
CONFIG_ZMK_RGB_UNDERGLOW_BRI=255